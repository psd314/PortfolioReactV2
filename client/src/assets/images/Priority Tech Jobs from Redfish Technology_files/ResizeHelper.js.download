var WindowHeight = function ()
{
	var alto = 0;
    if (typeof(window.innerWidth) == 'number')
	    alto = window.innerHeight;
    else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight))
	    alto = document.documentElement.clientHeight;
//    else if (document.body && (document.body.clientWidth || document.body.clientHeight))
//	    alto = document.body.clientHeight; * These 2 lines cause IE to lock up when the window is sized as small as possible. Not needed.
	return alto;
}

var Trace = function(message)
{
//    //alert(message);
}
var GetNeededBodyHeight = function ()
{
    // Detect browser type
    var isIE  = false;
    var isMoz = false;
    
    var browserName=navigator.appName;
    if (browserName=="Microsoft Internet Explorer")
        isIE = true;
    //else if(window.navigator.userAgent.indexOf("Firefox/3.0")!=(-1))
        //isMoz = true;
    if (isIE)Trace("is ie");

	// Get the sizes
    var winHeight = WindowHeight();
    var heightNeeded = winHeight - 108;
    Trace('heightNeeded: ' + heightNeeded);
    
    // Custom handling
    var customHeight = 0;
    try{
        customHeader = document.getElementById("CustomHeader");
        customHeaderIframeContainer = document.getElementById("ctl00_HeaderCell");
        customHeaderIframe = document.getElementById("ctl00_CustomHeader");
        
        if (customHeader != null)
        {
            // Logo image header
            Trace("customHeader found");
            if (isIE)
            {
                customHeight = customHeader.getAttribute("className");
                Trace("customHeader IE fix customHeight: " + customHeight);
            }
            else
            {
                customHeight = customHeader.getAttribute("class");
                Trace("customHeader customHeight: " + customHeight);
            }
        }
        else if (customHeaderIframeContainer != null)
        {
            // Custom HTML header
            Trace("customHeaderIframe found");
            if (isIE)
            {
                customHeight = customHeaderIframe.getAttribute("height");
                Trace("customHeaderIframe IE fix customHeight: " + customHeight);
            }
            else
            {
                customHeight = parseInt(document.getElementById("RAD_SPLITTER_PANE_CONTENT_ctl00_paneMainTitle").style.height);
				//customHeaderIframe.clientHeight;
                Trace("customHeaderIframe customHeight: " + customHeight);
            }
            // Get rid of the empty space at the bottom of window when custom HTML is being used.
            if (customHeight > 6)
                customHeight = customHeight - 6;
        }
        Trace('customHeight: ' + customHeight);
                  
        heightNeeded = winHeight - 61 - customHeight;
        //if (isIE)
            //heightNeeded -= 3;
        if (heightNeeded < 0)
            heightNeeded = 0;
    }
    catch(err){alert ("Unsupported browser. ");}
    
    Trace('new heightNeeded: ' + heightNeeded);
    return heightNeeded;
}

var Resize = function ()
{
    setgridheight();
}

var setgridheight = function()
{
    try
    {
        // Adjust the center grid height 
		var grouppanel = document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid_GroupPanel");
		
		var gridheader = document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid_GridHeader");
		var gridData = document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid_GridData");
		var paneheight = document.getElementById("RAD_SPLITTER_PANE_CONTENT_ctl00_ContentPlaceHolder_paneGrid").style.height;
		var gridheight = parseInt(paneheight) - grouppanel.clientHeight - gridheader.clientHeight;
		var pager = document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid_ctl00_Pager");
		//alert(pager);
	    if (navigator.appName == "Microsoft Internet Explorer")
	    {
		    if((pager.firstChild != null) && (pager.firstChild.firstChild != null))
	        {
	            //alert( gridheight );
		        //If pager found
	            gridheight = gridheight - 4;
	        }
	    } 
	    else
	    {
	        var tbodyobj = document.getElementById('ctl00_ContentPlaceHolder_SearchResultsGrid_ctl00_Pager').getElementsByTagName('tbody')[0];
	        if((tbodyobj != null)) //if pager found in mozilla
	            gridheight = gridheight - 3;
	    }
	    gridData.style.height = gridheight+'px';
		document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid").style.height = (parseInt(paneheight))+"px";
    }
    catch(Err)
    {
    
    }
}

window.onresize = function(){Resize();}
//window.onload=function(){}
function alertcontents( obj )
{
    var i, str ;
    var j = 0;
    
    for ( i in obj )
    {
        str = str + " \n" + i ;
        
        if( j%10 == 0 )
        {
            alert( str );
            str = "";
        }
        j++;
    }
    alert( str );
}

function ResizeAfterResponse()
{
    Resize();
    
    var gridData = document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid_GridData");
    var grid = document.getElementById("ctl00_ContentPlaceHolder_SearchResultsGrid");
    gridData.style.height = (parseInt(gridData.style.height.replace("px",""))-24) + "px";
    grid.style.height = (parseInt(grid.style.height.replace("px",""))-24) + "px";
}